From fa54a9d807d939bf6dc5aab0c20e2729563e2e60 Mon Sep 17 00:00:00 2001
From: William Horvath <william@horvath.blog>
Date: Sat, 8 Feb 2025 21:45:00 -0800
Subject: [PATCH 09/13] winex11: Ignore XI_BadDevice errors on X_OpenDevice
 when hotplugging devices.

---
 dlls/winex11.drv/x11drv_main.c | 9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/dlls/winex11.drv/x11drv_main.c b/dlls/winex11.drv/x11drv_main.c
index 5f9bbb2963d..da661050db3 100644
--- a/dlls/winex11.drv/x11drv_main.c
+++ b/dlls/winex11.drv/x11drv_main.c
@@ -226,6 +226,15 @@ static inline BOOL ignore_error( Display *display, XErrorEvent *event )
         }
 #endif
     }
+
+#ifdef HAVE_X11_EXTENSIONS_XINPUT_H
+    if (event->request_code == 131 /* XInputExtension */ &&
+        event->minor_code   == 3   /* X_OpenDevice */)
+    {
+        return TRUE;
+    }
+#endif
+
     return FALSE;
 }
 
-- 
2.51.2

