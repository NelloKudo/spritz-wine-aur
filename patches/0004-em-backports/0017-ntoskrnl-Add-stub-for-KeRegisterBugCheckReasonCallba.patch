From 14cd490b6756b5d9d598dd9dd5b0e4d612412925 Mon Sep 17 00:00:00 2001
From: Etaash Mathamsetty
 <45927311+Etaash-mathamsetty@users.noreply.github.com>
Date: Tue, 22 Jul 2025 16:53:06 -0400
Subject: [PATCH 17/44] ntoskrnl: Add stub for
 KeRegisterBugCheckReasonCallback.

---
 dlls/ntoskrnl.exe/ntoskrnl.c        | 10 ++++++++++
 dlls/ntoskrnl.exe/ntoskrnl.exe.spec |  2 +-
 2 files changed, 11 insertions(+), 1 deletion(-)

diff --git a/dlls/ntoskrnl.exe/ntoskrnl.c b/dlls/ntoskrnl.exe/ntoskrnl.c
index 42cbb5ebd6a..f11e7e4ad80 100644
--- a/dlls/ntoskrnl.exe/ntoskrnl.c
+++ b/dlls/ntoskrnl.exe/ntoskrnl.c
@@ -2848,6 +2848,16 @@ BOOL WINAPI KeRegisterBugCheckCallback(void *record, void *routine,
     return TRUE;
 }
 
+/***********************************************************************
+ *           KeRegisterBugCheckReasonCallback   (NTOSKRNL.EXE.@)
+ */
+BOOL WINAPI KeRegisterBugCheckReasonCallback(void *record, void *routine, ULONG reason, char *component)
+{
+    FIXME("%p %p %lu %s stub!\n", record, routine, reason, debugstr_a(component));
+
+    return TRUE;
+}
+
 /***********************************************************************
  *           IoRegisterFileSystem   (NTOSKRNL.EXE.@)
  */
diff --git a/dlls/ntoskrnl.exe/ntoskrnl.exe.spec b/dlls/ntoskrnl.exe/ntoskrnl.exe.spec
index 2ab03a027c7..d3d414d71b8 100644
--- a/dlls/ntoskrnl.exe/ntoskrnl.exe.spec
+++ b/dlls/ntoskrnl.exe/ntoskrnl.exe.spec
@@ -630,7 +630,7 @@
 @ stub KeReadStateSemaphore
 @ stub KeReadStateTimer
 @ stdcall KeRegisterBugCheckCallback(ptr ptr ptr long ptr)
-@ stub KeRegisterBugCheckReasonCallback
+@ stdcall KeRegisterBugCheckReasonCallback(ptr ptr long ptr)
 @ stub KeReleaseInterruptSpinLock
 @ stub KeReleaseMutant
 @ stdcall KeReleaseMutex(ptr long)
-- 
2.52.0

